# Control Module (`frontend/src/control`)

Input handling, camera movement, and block placement/removal.

## Files

| File | Purpose |
|------|---------|
| `index.ts` | Main Control class: keyboard/mouse handlers, flying camera, block interaction |

## Subdirectories

| Directory | Status | Purpose |
|-----------|--------|---------|
| `worker/` | Legacy | Web Workers for collision detection (disabled in flying mode) |

## Control Class Key Responsibilities

1. **Camera Movement** - WASD/QE flying with PointerLockControls
2. **Block Placement** - Left click to place selected color block
3. **Block Removal** - Right click to remove (ground blocks protected)
4. **Color Selection** - Number keys 1-9, 0 and scroll wheel
5. **Speed Toggle** - Space bar toggles walking/sprint speed

## Movement Controls

| Key | Action |
|-----|--------|
| W/S | Forward/backward along camera direction |
| A/D | Strafe left/right (horizontal) |
| Q | Move down (absolute Y axis) |
| E | Move up (absolute Y axis) |
| Space | Toggle speed (walking <-> sprint) |

## Block Interaction

| Action | Handler | Description |
|--------|---------|-------------|
| Left Click | `mousedownHandler` case 0 | Place block adjacent to hit face |
| Right Click | `mousedownHandler` case 2 | Remove hit block (if not ground) |
| Hold Click | setInterval 250ms | Repeat placement/removal while holding |

## Validation Checks (Placement)

1. **Player Overlap** - Don't place block at camera position
2. **Coordinate Bounds** - Must be within BLOCK_X/Y/Z_MIN/MAX
3. **Block Limit** - Must not exceed MAX_USER_BLOCKS (10,000)

## Color Block Selection

| Input | Block |
|-------|-------|
| 1 | Red |
| 2 | Orange |
| 3 | Yellow |
| 4 | Green |
| 5 | Blue |
| 6 | Violet |
| 7 | Brown |
| 8 | White |
| 9 | Gray |
| 0 | Black |
| Scroll | Cycle through colors |

## Legacy Worker Subdirectory (`worker/`)

| File | Status | Purpose |
|------|--------|---------|
| `downCollide.ts` | Legacy | Vertical collision detection for walking mode |
| `sideCollide.ts` | Legacy | Horizontal collision detection |

These workers are no longer used as the MVP uses flying mode exclusively.

## Related Files

- Terrain (block management): `terrain/index.ts`
- Player (speed values): `player/index.ts`
- Constants (bounds): `constants.ts`
- Audio (sound effects): `audio/index.ts`
